

## 关键执行节点说明

核心路径：
阶段0→1→2 : 基础设施搭建和验证
阶段3A&3B : 并行开发（您可以选择先做哪个）
阶段4 : 集成测试
阶段5 : 主要迁移工作
阶段6→7 : 完善和收尾
关键决策点：
阶段3分叉：UI组件包和资源管理可以并行，您可以根据偏好选择顺序
阶段5：最复杂的部分，需要您手动处理导入路径替换
验证节点：每个关键阶段后都有明确的"通过标准"

```
graph TD
    A[🚀 阶段0: 创建Workspace结构] --> B[📦 阶段1: 创建lib包]
    B --> C[🧪 阶段2: 验证包引用机制]
    C --> D{选择并行路径}
    
    D --> E[🎨 阶段3A: 创建UI组件包]
    D --> F[📁 阶段3B: 实现资源管理]
    
    E --> G[🔗 阶段4: 包间依赖测试]
    F --> G
    
    G --> H[🌐 阶段5: 迁移主网站]
    H --> I[⚙️ 阶段6: 完善工具链]
    I --> J[🚢 阶段7: 版本管理配置]
    
    %% 详细说明
    A --> A1["• workspace目录结构<br/>• pnpm-workspace.yaml<br/>• 根package.json"]
    B --> B1["• @next-ai-build/lib<br/>• 迁移utils和config<br/>• 构建配置"]
    C --> C1["• 创建test-app<br/>• 验证workspace:*依赖<br/>• 测试导入"]
    E --> E1["• @next-ai-build/base-ui<br/>• React组件<br/>• 依赖lib包"]
    F --> F1["• shared/assets结构<br/>• 资源扫描脚本<br/>• 符号链接机制"]
    G --> G1["• 测试包间引用<br/>• 验证构建产物<br/>• 依赖解析"]
    H --> H1["• 复制原项目到apps/<br/>• 更新package.json<br/>• 替换导入路径"]
    I --> I1["• CLI工具完善<br/>• 资源自动链接<br/>• 开发脚本"]
    J --> J1["• Changesets配置<br/>• 发布流程<br/>• 版本管理"]
    
    %% 关键验证点
    C -.->|验证通过| D
    G -.->|测试通过| H
    H -.->|网站正常运行| I
    
    style A fill:#e1f5fe
    style D fill:#fff3e0
    style H fill:#f3e5f5
    style J fill:#e8f5e8
```